## 跟你朋友介紹 Git

### **《論版本控制與後宮養成遊戲的同與異》**   菜哥的朋友⊙著
-----

#### 〈前言〉 - 你會需要版本控制

    憑你的智商， 我很難跟你解釋，不如這樣，我們彼此擁抱到天亮♪……等一下，先不要，陳奕迅你下去。

    這樣吧，我就用我平常在玩的後宮遊戲來跟你解釋一下好了。你想管理你的笑話，我要管理我的後宮
不要起火，工程師需要控制他們的專案，這背後的原因其實不盡相同，因為我們是人，是人就會貪，我不
甘於只跑一條劇情線，我都花錢買遊戲了，裡面的帥哥我全都要。

    你的笑話、工程師的專案跟我的後宮，背後的運作有點類似一個樹狀結構，起始點都是一個，然而隨
著劇情推進，我們會遇到分歧點，小明可能有不同的下場，專案可能要測試兩種不同的新功能，而我要選
擇要不要接受男主的求婚。

    這個時候，貪心的我們就會想要一邊可以保存之前努力的成果，一邊去探索新的可能性，因此，版本
控制因應而生。我們在分歧的節點存檔，是因為我怕我會後悔太早跟男主結婚（不是），萬一失敗了，可
以隨時讀檔重來，皇上挑後宮便是如此，長得不錯的我就留著，我很可能這輩子都不會臨幸他，但那又怎
樣呢，留在我的後宮裡我哪天想到，要傳召就傳召，放著不吃虧。

    給自己留的後路跟選擇，就如後宮的人數一樣，越多越好，出 Bug 惹我生氣了，打入冷宮就行，萬
一我不小心懷念起來，我是皇上，叫他出來他就要出來，一國之君就是這麼任性、恣意妄為。

#### 〈概念釐清與舉例比較〉

     為了更好理解，我們來舉個例子，對照一下管理專案跟管理後宮的概念。我就先不用你的笑話舉例
了，因為很冷，我家冷氣又太強。

| 工程師 | 我 |
| :----- | :-----|
| 建立新專案 | 打開新遊戲 |
| 寫基本架構 | 跑劇情序章 |
| 需要新功能 | 想看新帥哥 |
| 寫出一堆 Bug | 沒照攻略跑錯選項 |
| 某功能改版 | 某角色第二種結局 |

    就像這樣子，進行一個專案跟跑一個遊戲一樣，隨著進度往前，不定時地會到處開闢新的戰場，但我
們為了避免專案爆炸／後宮起火，在確保正宮安穩的同時，需要分散風險也需要分散煙硝味，因此在版本
控制的領域裡，我們會使用到 Branch 這個東西，也就是分支。

    在進入二擇一的重要局面前，我們要把目前進度存起來，先跑選項一的劇情，這就是其中一個分支，
我們就先叫 Branch 1。跑完之後我也想看看選項二會有什麼劇情，就再載入檔案，從剛剛二擇一的地方
開始，這就是 Branch 2 。

| Git | 我的後宮 | 存檔點／分歧事件 |
| :------ |:----- |:----- |
| Master （主版本） | 封面官配男主HE路線 | 走完序章後照著劇情跑，答應男主的追求 |
| Branch1-新增功能 | 聽聞劇情很不錯的青梅竹馬線1 | 拒絕男主的追求，搬回鄉下開始種田 |
| Branch2-優化寫法 | 純粹看顏值跑的背德不倫線2 | 答應男主的追求，去他公司上班，跟他同事訴苦 |
| Branch3-Bug Fix | 會崩潰搞監禁的致鬱病嬌男3 | 拒絕男主的追求，身敗名裂只好去賣身 |
| Branch4-加點好玩的 | 開朗的治癒系年下犬系男4 | 答應男主的追求，但留在原本職場跟新進後輩精神出軌 |
| Branch5-產生更多Bug | 玩到結尾發現是自己血親的胃痛線 |拒絕男主的追求，搬回鄉下外出求職 |
| Branch6-整個程式崩潰 | 封面官配男主隱藏BE | 答應男主的追求後莫名其妙開始賣身 |

    以上這個表格，不重要，而且也不準確，我只是想再列個表格。

    總之，我們現在可以理解，管理各種不同版本，我們會新建很多的 Branch。然後我們現在要知道這
些分支是如何分出來的。劇情發展要有基石，也就是我們開好專案後一開始寫的那個基本架構的部分，在
這邊我們稱為 Master，這就是我們發展出那麼多分支的主幹，不管我們加多少東西進去，這個主幹都是
不變的，因為你不管玩什麼角色，每次打開這個遊戲序章都是一樣的。

     好的，那麼問題來了。當我們新寫好一個功能，我們要怎麼在我們的基本架構上新增這個功能呢？
畢竟，我們新增功能就是要用啊。我今天建了一個網站，然後開個分支新增了一個功能，我必須要讓新功
能出現在網站上，也就是要把這個分支插回去樹幹上，但在我們進行插的動作之前，我們要讓樹幹知道我
們要插了！

在進行版本控制的時候，檔案會被分為兩種狀態：

* Staged：在控制之下
* Untrack：未進行追蹤控制

    所以我們需要先將檔案加入 Stage ，讓電腦知道需要注意這個檔案，因為我有改動它，而這個改動
至關重要，關係到最後我們這棵樹會長成什麼樣子。然後我們會稍稍來進行一個叫做 Commit 的動作，用
了非常多的冗字只是想表達這個類似於存檔的概念。當我們完成了新增／修改，要讓電腦知道我們要保留
這個精美的樹枝。

    最後我們會再來進行一個叫做 Merge 的帥氣動作，把我們的新東西插回去主幹上。接著我們會發現
一個版本控制與後宮遊戲最決定性也最讓人哀傷的差異：使用 Git 進行版本控制時，我們可以 Merge 全
部的東西讓他們合而為一，但我卻無法像真正的皇帝一樣將所有男角合併一個後宮，想去哪睡就去哪睡。

    我恨這個世界。菜哥可以把他所有的冷笑話合併成長達十萬字的冷笑話大全，我卻無法一次擁有五個
男人。

#### 〈做法〉

    稍微知道概念之後，就來看一下實地上要怎麼操作。使用 Git Bash 來進行版本控制，以下是會使
用到的指令：

* git init ：初始化
* git branch 指定名稱 ：新建一個分支
* git add 檔名 ：將檔案加入 Stage
* git commit  ：儲存這個版本
* git merge ：合併版本

* git status ：看檔案狀態
* git log ：看歷史 Commit 紀錄
* git checkout ：切換回到特定版本

     我們先寫個笑話的開頭：`有一天，小明出門時被車撞…` →存檔 小明被撞.txt

     然後我們要開始來發展這個笑話的劇情，首先我先想到了一段，於是我使用`git branch 下場1`，
新建好一個分支，然後我跳到新分支，編輯這個笑話 `有一天，小明出門時被車撞，他死了` ，然後就
粗暴地存檔。 →存檔 小明被撞.txt (於下場1分支）

    然後我們要把 小明被撞.txt 加入版本控制，於是輸入`git add 小明被撞.txt` ，將檔案加入
Stage ，然後我們再輸入 `git commit -m 小明死了` 。 這個`-m 小明死了` 就是在 Commit 時加入
一個訊息，來說明這個版本大概是什麼東西。

    但是我後來覺得小明死得太快，應該讓他多受一些折磨，所以我用 `git checkout master` 再重
新開始，寫一個新版本。`git branch 下場2` ， `有一天，小明出門時被車撞，被送到醫院電擊一百
次，又活下來了。` ，然後我存檔， add  小明被撞.txt ， commit -m 小明被電。

    我覺得這兩個下場都不錯，所以我要把他們融合在一起，就會有雙倍的笑點雙倍的快樂。所以我 `git
checkout master` ，切換到我的笑話主幹，然後先 `git merge 下場1` ，把小明的第一個結局加進來，
然後再 `git merge 下場2` ，想把第二個結局也加進來，但是我失敗了，因為我的笑話產生了衝突，小明
沒辦法一邊活著一邊死掉。

    我們產生了新的問題，寫程式就是在解決別人的問題時一邊給自己製造一堆新的問題，至於怎麼解決，
我現在不想教你，你自己去學，馬der。
